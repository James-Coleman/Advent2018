import Foundation

let input = """
ovfclbidieyujztrswxmckgnaw
pmfqlbimheyujztrswxmckgnap
ovfqlbidhetujztrswxmcfgnas
gvfqebddheyujztrswxmckgnap
ovfqlbidheyejztrswxqekgnap
ovzqlbiqheyujztsswxmckgnap
oofqlbidhoyujztoswxmckgnap
ovfqlbicqeyujztrswxmckgncp
ovfelbidheyujltrswxmcwgnap
ovfqlbidheyujzerswxmchgnaf
bvfqlbidheyxjztnswxmckgnap
ovfqlbidheyugztrswamnkgnap
ovfqxbidheyujrtrswxmckgbap
ovfqlbidheyujztrdwxqckgjap
ovfqebiqheyujztrscxmckgnap
avfqlbidheyvjztkswxmckgnap
ovfqlbidheyujktrswxvskgnap
ovfqlbidheeujztrswrmckgnae
ovaqlbidheydjztrswxmchgnap
ovfqlbodweyujztpswxmckgnap
xvfqlbidhmyujztrswxmykgnap
ovfqlnidheyujztxswumckgnap
ovfqlbidhexujztrswxyckgeap
ovfqlkidhekubztrswxmckgnap
ovfqlbidheysjzkrsxxmckgnap
oxfqebidheyujzprswxmckgnap
ovfqlbidhetujztrswmmckghap
ovfclbidhuyujztrswrmckgnap
ovfqlbijhdyujztrswxmcvgnap
ovfqlkidhyyujztrswxvckgnap
ovfqlbiehlyujztrswxhckgnap
ovfqlbidheyxjjtrsdxmckgnap
jvfqlbidheyujztrvwxmckcnap
ovfvlbidheyujzhrswxmckgnzp
ovfqnbidhuyujztrswfmckgnap
ovfrlbidheyujztpswxmckgnat
ovfqpbidheyujztrywxmcngnap
ovfqlbidheyumrtrswpmckgnap
ovfqlbidhoyzjztrswxmckgkap
ovfqlbibheyuhztrswxmskgnap
ovfqlbidheybjzfrswxkckgnap
ovfqnbinheyujztrawxmckgnap
ovfqlbidheyujztryxxmckgnao
ovfqzbidheyujztrsuxmckgnpp
ovfqlbidherujztrswxmckgjsp
ovfqlbidheyujhtrywxmckgtap
oofmlbidheyujftrswxmckgnap
ovfqlbidhhyujztrawxmckgnbp
ovfqlbidheyujztrswxeckmnae
lvfqlbidheyujztrswxzckvnap
ovfqlbidheyujztrswxmckqnfr
offqlbidheyrjztrswxmwkgnap
ovnqlbidzeyujztmswxmckgnap
ovfxlbxdheyujztrawxmckgnap
ovfqmbidheyujztrsaxwckgnap
ovfqlbidhryzjztrswxmckgcap
offqlbidheyujnthswxmckgnap
ogmqlbimheyujztrswxmckgnap
ovfqlbidheyulztkswxockgnap
ovfqlbidheyujjtrswxmckypap
ovfqibidheypjztrswxmskgnap
ovfqlbwdhyyujztrswxmckgnnp
ovfqlbidheyujztsvwxmckgkap
odfqlbidoeyujztrswxjckgnap
ovfqlbodpeyujztrswxmcggnap
ovfqlbicheyujztrhwxmcagnap
ovfqlbidheyuaztrgwxmckhnap
ovfwlbidhyyujztrswtmckgnap
ovfqlbidgzyujztrswxmckgcap
ovnqlbcdheyujztrswxmckgnup
ovfqlbieheyujrtrsdxmckgnap
ovfqlbidkeyujztrswfmckgnqp
ovfqlbidtekujztrswxsckgnap
ovfklbedheyujztrscxmckgnap
ovfqltivhnyujztrswxmckgnap
ovfqlbidheyuvuyrswxmckgnap
ovfqlbidheyjjrtrcwxmckgnap
ojfqlbidheyujztrswxmckguvp
ovfqlbidheiqjqtrswxmckgnap
ivfqlfidheyujatrswxmckgnap
cvfqlbidheyujgtrswxmckgnrp
ovfclbidheeujztrswxmckgnaw
ovfqlbhdheyujztrswvmcklnap
ovfqcbidheyvjztaswxmckgnap
ovgqlbijheyujztrswxvckgnap
gvfqlbidheyujvtrswxmckgnaj
ovfqlbidheyujztrdwxmcggnvp
cvfqlbidheyujgtrswxmckqnap
ovfqlbrdheyqjztrswxmckgnaj
ovfqlbidheyujzjrswbmcrgnap
ovfqlbvdheyujxtrswxvckgnap
ovaqlbidheyujctrswxmbkgnap
ovfqlbidheyujztgdwxvckgnap
ovfqlbidhevujztrssxmwkgnap
rvfqlbidheyujztrzwxmckhnap
ovfqmbidheysjztrswxmikgnap
ovfqlbidheiujztrsdxuckgnap
ovfqlbidheyveztrswxmckgnah
ovfqnbiaheytjztrswxmckgnap
ovfqlbidnayujhtrswxmckgnap
ovfqlbidheyujztnswxdckgnag
ovfqlbidheyuyztrswxmzzgnap
ovfqlbiohexujzthswxmckgnap
lvfqlbidheyujztcswxxckgnap
ovuqlbidhfxujztrswxmckgnap
ovfqluidheyujotrswxmrkgnap
ovfalbidheyujztrswxhckgngp
ohjqlbidheyujztrswumckgnap
ovfqxbidhecujztrspxmckgnap
ovfqcbidheyusztrpwxmckgnap
fvfwlbidheyujztrswxmcxgnap
ovfqlbidhxyplztrswxmckgnap
ovfqlbidheyujftrswxdckgrap
ovfqlepdheyujztrswxmckgnjp
ojjqlbidhuyujztrswxmckgnap
ovfqlbwdheyujztrswxmcggeap
ovfqlbidheyujltrscxkckgnap
oifqibidheyujztrswxjckgnap
ovfqlbigheyujztrswdmcqgnap
ovfqlbieheyujztrswxzzkgnap
ovfqlbidheyujztrswmmcgbnap
ovfqlbidhnyujzerswxmkkgnap
ovfqdbinheyujztrswxeckgnap
oveqlbidheyujztrswhmckgnab
ovfqkbytheyujztrswxmckgnap
ovfqlbidheyujstsswxmcklnap
ovfimbidheyujztrewxmckgnap
ovfqebidhequjztrnwxmckgnap
ovfqlbidheyukztrswxmckunwp
oifqlbidheyuwztrswxmckgnao
ovfqlbidweyufztrswxmckgtap
evfqlbidheyujztrswxsckvnap
svbqlbidheyujztrsaxmckgnap
ovfqlbidheyaoztrswxmckjnap
ovfqllidheyujztrswxmckynhp
ohfqlbidheyujatrswtmckgnap
omfjlfidheyujztrswxmckgnap
xvfqlbidheyujutrswxvckgnap
ovfqlbidheyukztsswxmzkgnap
ovfqibidhehujztrswxeckgnap
ovfqlbydheyuoztrswxmcygnap
ovfqlbidheyufztrmwxmckvnap
ovfqrbkdheyujztrswxmckgnaq
ovfqlbigheyuyztrswxmckgzap
ovfqlbidheyujztrsjxmcnnnap
uvfqlbipheyujztrswxmckgnay
ovfqlbddneyujbtrswxmckgnap
tvfqlbidheyujztrswxpckgeap
ovfqlbidheyuiztrhwxmckznap
ovfqlbidheyujzteswxvckgvap
avfqlbidheyijzlrswxmckgnap
oqfqmbidheyujvtrswxmckgnap
ovnqlbidneyujztrswxmckxnap
ovfqlbidfeyujztrswxqckgncp
ovfaybidheyujztrswxrckgnap
ovfqlbidhemujzarnwxmckgnap
ovfqlwidheyujctrsfxmckgnap
ovtelbidheysjztrswxmckgnap
ovfqlbidheyujztrswsmchunap
pvfqlbidheyulztrswxmckynap
ovfqlbzdhezujztfswxmckgnap
ozfqibidheyujztrhwxmckgnap
ovfqlbioheycjztmswxmckgnap
ovfqleidheyujztoswxmckgnhp
ovfqlcidhejujztrswnmckgnap
eqfqlbidheyujztrswxmrkgnap
ovfqlbitheywjztrmwxmckgnap
ovfqlbidheyujptrswnmcggnap
oofqlbidhjyujztrswxmcegnap
ovfqlbidmeyujztrswxmcxgnxp
ovjhlbidhefujztrswxmckgnap
ovfqlbidkeyujzarswxmcugnap
hvyqlridheyujztrswxmckgnap
ovfqlbidheyujxtrswqmckgnpp
ovfqlbidheyuiztrtsxmckgnap
ovfqlbidqeyuuztrbwxmckgnap
ovfqpbidheyujztrswxwekgnap
ovfqltidheyujztrbwxmckgnab
okfxluidheyujztrswxmckgnap
ovfplbidheyujztrsaxmckgnax
wvfqlbidheiujztrswxjckgnap
ovfqlbidheyqjzlrsqxmckgnap
ovfqlbadheyujztrsxxmckgnop
ovfqliidheyujzerswvmckgnap
ovlrlbidheyujztaswxmckgnap
cvzqlbidheyujgtrswxmckqnap
ovfqlbidheyujzuqswxmckgnnp
ovfqlsjdheyujztrswxmcklnap
ovrqlbidheyujztrssrmckgnap
ovcqlbidheyujztrsmxmcognap
ovcqlbidheyjjztrswxmckunap
ovfilbrdhnyujztrswxmckgnap
ovfqlbodheyujztrswxeckqnap
ovfqlbidhuyujqtrswxdckgnap
ovmqlbidheyujderswxmckgnap
ovfylbidheyajzrrswxmckgnap
ovfklbidhtyujzjrswxmckgnap
rvfqlbidheyujztcswxcckgnap
ovfnlyidheyuwztrswxmckgnap
ovfqlbidhexujztrswxmpktnap
ovfplbidheyfjztrswhmckgnap
oyfqlbidmexujztrswxmckgnap
mvfqlbidhcyujztrawxmckgnap
ovfqlbidhqyujdtrswxmcbgnap
ovfqjbidheybjrtrswxmckgnap
ozfqlbidhbyujztrswxmckgpap
okfqlbidheyujztrmwxmckhnap
ovfqlbydheyujzrrswxnckgnap
ovfqtbidheycjztrswxmckgnah
avfqloidheyujztrswxyckgnap
ovfqlbldteyujzyrswxmckgnap
ovfqlbpdhedujztpswxmckgnap
ovfqlbidheyujztrswxucrvnap
ocnqlbidheyujztrswxmwkgnap
ovfqlvidheyujztrswkmckgnlp
evfqlbidheyujzmrswqmckgnap
ovfqlbidhryujztrcwxmekgnap
ovfqlbvdheyujztrzwxmcxgnap
ovfqlridgeyujztrswxmkkgnap
yvfqlbidheyujzthswzmckgnap
ovfqlbidheyujmtrswxyukgnap
ovfqlbidheqgjztrswdmckgnap
dvfzlcidheyujztrswxmckgnap
jvfqlbidheyujztrswxmczgnae
ovfqlbzdheyujztrswxyckgnjp
ovfqlbxdheyujatrswxmcqgnap
ovftlbldheyujztrewxmckgnap
owfqlbitheyujzyrswxmckgnap
ovfqlbidheyujztrswxmchgtvp
ovfqibidheyujzttswxmkkgnap
ovkqlbodheyujztvswxmckgnap
onfqlbbdheyujztrxwxmckgnap
ovfqlbidyeysgztrswxmckgnap
ovfqlbixherujztrswxmcngnap
ovlqlbidfeyujztrswxgckgnap
ovfqlbfdheyujztwswumckgnap
ovfqlbidheeujztrswxmckgkah
ovfqtbqdheyujztrswmmckgnap
bbfqlbigheyujztrswxmckgnap
ovfqljidheyujztrswxmwkgnip
ovfqobidheyujztrsvxmmkgnap
ovfqlbidheydjvtrswxmckanap
ovfqlxidheyujztrswgmckgnep
jvfqlbidhzyujztrswxmckgnay
ovfqlbidhkyujztrswxmlkenap
ovfqobidheyujztrswxmckjnaf
ovfxlbidheyujztrswxmcbgnac
ovfqcbidhtyujztrswxmckqnap
ozfglbidheyujzvrswxmckgnap
ovfqlbidheyujztoswxyckcnap
"""

// MARK: Part 1

func part1() -> Int {
    let codes = input.split(separator: "\n")
    
    func letterCounts(from string: String) -> [String: Int] {
        var output: [String: Int] = [:]
        
        string.forEach { character in
            let letter = String(character)
            
            if let count = output[letter] {
                output[letter] = count + 1
            } else {
                output[letter] = 1
            }
        }
        
        return output
    }
    
    var twos = 0
    var threes = 0
    
    codes.forEach { code in
        let string = String(code)
        let letterCount = letterCounts(from: string)
        
        if letterCount.contains(where: { (_, value) -> Bool in
            value == 2
        }) {
            twos += 1
        }
        
        if letterCount.contains(where: { (_, value) -> Bool in
            value == 3
        }) {
            threes += 1
        }
    }
    
    return twos * threes
}

//print(part1()) // 6642 Correct!

func differentLetters(stringA: String, stringB: String) -> Int {
    var differentLetters = 0
    
    stringA.enumerated().forEach { offset, element in
        guard let bLetter = stringB.prefix(offset + 1).last else { return }
//        (bLetter, element)
        if bLetter != element {
            differentLetters += 1
        }
    }
    
    return differentLetters
}

//differentLetters(stringA: "abcde", stringB: "abcdf")

func sameLetters(stringA: String, stringB: String) -> String {
    var stringToReturn = ""
    
    stringA.enumerated().forEach { offset, element in
        guard let bLetter = stringB.prefix(offset + 1).last else { return }
        if bLetter == element {
            stringToReturn.append(element)
        }
    }
    
    return stringToReturn
}

//sameLetters(stringA: "abcde", stringB: "abcdf")

enum Day2Error: Swift.Error {
    case differenceOf1NotFound
}

func part2() throws -> String {
    let codes = input.split(separator: "\n")
    
    outerloop:
    for (index, code) in codes.enumerated() {
        let stringCode = String(code)
        
        var secondIndex = index + 1
        
        innerloop:
        while secondIndex < codes.count {
            let secondCode = codes[secondIndex]
            let stringSecondCode = String(secondCode)
            
            if differentLetters(stringA: stringCode, stringB: stringSecondCode) == 1 {
                return sameLetters(stringA: stringCode, stringB: stringSecondCode)
            }
            
            secondIndex += 1
        }
    }
    
    throw Day2Error.differenceOf1NotFound
}

do {
    print(try part2()) // cvqlbidheyujgtrswxmckqnap Correct!
} catch let error {
    print(error)
}
